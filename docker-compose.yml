version: "3.9"

services:

  # -------------------------
  # MongoDB (Database)
  # -------------------------
  mongo:
    image: mongo:6
    container_name: mongo
    volumes:
      - mongo-data:/data/db
    networks:
      - ecommerce-net


  # -------------------------
  # Product Service
  # -------------------------
  product:
    build: ./Product
    container_name: product
    env_file:
      - ./env/product.env
    depends_on:
      - mongo
    networks:
      - ecommerce-net


  # -------------------------
  # User Service
  # -------------------------
  user:
    build: ./User
    container_name: user
    env_file:
      - ./env/user.env
    depends_on:
      - mongo
    networks:
      - ecommerce-net


  # -------------------------
  # Cart Service
  # -------------------------
  cart:
    build: ./Cart
    container_name: cart
    env_file:
      - ./env/cart.env
    depends_on:
      - mongo
    networks:
      - ecommerce-net


  # -------------------------
  # Frontend (React + Nginx)
  # -------------------------
  frontend:
    build: ./front-end
    container_name: frontend
    ports:
      - "80:80"          # Only exposed entry point
    depends_on:
      - product
      - user
      - cart
    networks:
      - ecommerce-net


# -------------------------
# Volumes
# -------------------------
volumes:
  mongo-data:


# -------------------------
# Network
# -------------------------
networks:
  ecommerce-net:
    driver: bridge




version: "3.9"

services:

  # -------------------------
  # MongoDB
  # -------------------------
  mongo:
    image: mongo:6
    container_name: mongo
    volumes:
      - mongo-data:/data/db
    networks:
      - ecommerce-net


  # -------------------------
  # Product Service
  # -------------------------
  product:
    build: ./Product
    container_name: product
    ports:
      - "9000:9000"        # ðŸ‘ˆ Direct HTTP access
    env_file:
      - ./env/product.env
    depends_on:
      - mongo
    networks:
      - ecommerce-net


  # -------------------------
  # User Service
  # -------------------------
  user:
    build: ./User
    container_name: user
    ports:
      - "9001:9001"        # ðŸ‘ˆ Direct HTTP access
    env_file:
      - ./env/user.env
    depends_on:
      - mongo
    networks:
      - ecommerce-net


  # -------------------------
  # Cart Service
  # -------------------------
  cart:
    build: ./Cart
    container_name: cart
    ports:
      - "9003:9003"        # ðŸ‘ˆ Direct HTTP access
    env_file:
      - ./env/cart.env
    depends_on:
      - mongo
    networks:
      - ecommerce-net


  # -------------------------
  # Frontend (React + Nginx)
  # -------------------------
  frontend:
    build: ./front-end
    container_name: frontend
    ports:
      - "80:80"            # ðŸ‘ˆ Main entry point
    depends_on:
      - product
      - user
      - cart
    networks:
      - ecommerce-net


# -------------------------
# Volumes
# -------------------------
volumes:
  mongo-data:


# -------------------------
# Network
# -------------------------
networks:
  ecommerce-net:
    driver: bridge
